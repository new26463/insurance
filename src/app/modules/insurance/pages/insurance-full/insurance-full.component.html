<div class="card m-3 max-w-lg">
  <form
    (ngSubmit)="submit()"
    [formGroup]="insureForm"
    class="flex flex-col w-100 p-3"
  >
    <div class="flex flex-row gap-3">
      <mat-form-field>
        <mat-label>ชื่อ</mat-label>
        <input
          formControlName="name"
          matInput
          type="text"
        />
        @if (insureForm.get('name')?.errors && insureForm.get('name')?.touched) {
        <mat-error class="text-xs">กรุณาใส่ชื่อ</mat-error>
        }
      </mat-form-field>

      <mat-form-field>
        <mat-label>นามสกุล</mat-label>
        <input
          formControlName="surname"
          matInput
          type="text"
        />
        @if (insureForm.get('surname')?.errors && insureForm.get('surname')?.touched) {
        <mat-error class="text-xs">กรุณาใส่นามสกุล</mat-error>
        }
      </mat-form-field>
    </div>

    <mat-form-field>
      <mat-label>จังหวัด</mat-label>
      <mat-select formControlName="province">
        <mat-option
          disabled
          hidden
          selected
          value=""
        >
          --เลือกจังหวัด--
        </mat-option>
        @for(item of PROVINCE; track item) {
        <mat-option [value]="item.name_th"> {{item['name_th']}} </mat-option>
        }
      </mat-select>
      @if (insureForm.get('province')?.errors && insureForm.get('province')?.touched) {
      <mat-error class="text-xs">กรุณาเลือกจังหวัด</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>เบอร์โทรศัพท์</mat-label>
      <input
        formControlName="phoneNumber"
        matInput
        maxlength="10"
        type="text"
      />
      @if (insureForm.get('phoneNumber')?.errors && insureForm.get('phoneNumber')?.touched) {
      <mat-error class="text-xs">กรุณาใส่เบอร์โทรศัพท์</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>เลขบัตรประชาชน</mat-label>
      <input
        formControlName="personalId"
        matInput
        maxlength="13"
        type="text"
      />
      @if (insureForm.get('personalId')?.errors && insureForm.get('personalId')?.touched) {
      <mat-error class="text-xs">กรุณาใส่เลขบัตรประชาชน</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Email</mat-label>
      <input
        formControlName="email"
        matInput
        placeholder="Ex. pat@example.com"
        type="email"
      />
      @if (insureForm.get('email')?.errors && insureForm.get('email')?.touched) {
      <mat-error class="text-xs">กรุณาใส่ email</mat-error>
      }
    </mat-form-field>

    <div class="flex flex-row gap-3 p-3">
      <app-e-signature (onSubmit)="onSign($event)"></app-e-signature>
    </div>

    <button>ยืนยัน</button>
  </form>
</div>
